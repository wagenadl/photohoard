{ "typ": "page",
  "cre": "2016-01-28T08:52:42",
  "mod": "2016-01-28T09:19:45",
  "cui": "f37486f547d0daaf",
  "stampTime": 0,
  "startPage": 37,
  "unlocked": false,
  "uuid": "6294f02e",
  "cc": [
    { "typ": "title",
      "cre": "2016-01-28T08:52:42",
      "mod": "2016-01-28T08:53:11",
      "uuid": "ced224e1",
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T08:52:42",
          "mod": "2016-01-28T08:53:11",
          "lines": [
            0
          ],
          "text": "Haze removal",
          "uuid": "bddc01c3"
        }
      ]
    },
    { "typ": "resources",
      "cre": "2016-01-28T08:52:42",
      "mod": "2016-01-28T08:52:42",
      "uuid": "027a081a"
    },
    { "typ": "textblock",
      "cre": "2016-01-28T08:53:11",
      "mod": "2016-01-28T08:57:26",
      "h": 96.664,
      "ind": 0,
      "sheet": 0,
      "split": [ ],
      "uuid": "2d5e9be0",
      "y0": 72.0,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T08:53:11",
          "mod": "2016-01-28T08:57:26",
          "lines": [
            0,
            68,
            133,
            198
          ],
          "text": "I already have a local contrast tool. I’ll write down its algorithm in a minute. But I would also like a haze removal tool. The idea is that the image I(x) is a linear combination of the scene S(x) and haze that is modeled by",
          "uuid": "d2bb22c9",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T08:53:52",
              "mod": "2016-01-28T08:53:52",
              "end": 152,
              "start": 151,
              "style": 1,
              "uuid": "818d487a"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:53:52",
              "mod": "2016-01-28T08:53:52",
              "end": 154,
              "start": 153,
              "style": 1,
              "uuid": "2ca5c60f"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:54:07",
              "mod": "2016-01-28T08:54:07",
              "end": 194,
              "start": 193,
              "style": 1,
              "uuid": "07a8a8d9"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:54:08",
              "mod": "2016-01-28T08:54:08",
              "end": 196,
              "start": 195,
              "style": 1,
              "uuid": "d299dcd3"
            }
          ]
        }
      ]
    },
    { "typ": "textblock",
      "cre": "2016-01-28T08:57:27",
      "mod": "2016-01-28T09:11:16",
      "h": 19.147,
      "ind": 3,
      "sheet": 0,
      "split": [ ],
      "uuid": "cbaf1531",
      "y0": 168.664,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T08:57:27",
          "mod": "2016-01-28T09:11:16",
          "lines": [
            0
          ],
          "text": "I(x) = [1−β(x)] S(x) + β(x)H(x),",
          "uuid": "60e66666",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T08:57:28",
              "mod": "2016-01-28T08:57:28",
              "end": 1,
              "start": 0,
              "style": 1,
              "uuid": "b5af46cb"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:57:29",
              "mod": "2016-01-28T08:57:29",
              "end": 3,
              "start": 2,
              "style": 1,
              "uuid": "d0bdf128"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:57:34",
              "mod": "2016-01-28T08:57:34",
              "end": 13,
              "start": 12,
              "style": 1,
              "uuid": "43558831"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:57:37",
              "mod": "2016-01-28T08:57:37",
              "end": 17,
              "start": 16,
              "style": 1,
              "uuid": "05a97d5c"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:57:37",
              "mod": "2016-01-28T08:57:37",
              "end": 19,
              "start": 18,
              "style": 1,
              "uuid": "738af6ff"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:57:52",
              "mod": "2016-01-28T08:57:52",
              "end": 26,
              "start": 25,
              "style": 1,
              "uuid": "d9e474b5"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:58:01",
              "mod": "2016-01-28T08:58:01",
              "end": 28,
              "start": 27,
              "style": 1,
              "uuid": "52133302"
            },
            { "typ": "markup",
              "cre": "2016-01-28T08:58:01",
              "mod": "2016-01-28T08:58:01",
              "end": 30,
              "start": 29,
              "style": 1,
              "uuid": "49a5f95d"
            }
          ]
        }
      ]
    },
    { "typ": "textblock",
      "cre": "2016-01-28T08:58:07",
      "mod": "2016-01-28T09:10:20",
      "h": 73.498,
      "ind": 0,
      "sheet": 0,
      "split": [ ],
      "uuid": "2c800455",
      "y0": 187.811,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T08:58:07",
          "mod": "2016-01-28T09:10:20",
          "lines": [
            0,
            65,
            128
          ],
          "text": "where β is a scalar density and H is an RGB value (or LMS value, or whatever) that represents the color of the haze. If β and H are know, S can be reconstructed:",
          "uuid": "584e5630",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T08:58:23",
              "mod": "2016-01-28T08:58:23",
              "end": 33,
              "start": 32,
              "style": 1,
              "uuid": "a5ab7ad8"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:13",
              "mod": "2016-01-28T09:10:13",
              "end": 127,
              "start": 126,
              "style": 1,
              "uuid": "b0ce727c"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:16",
              "mod": "2016-01-28T09:10:16",
              "end": 139,
              "start": 138,
              "style": 1,
              "uuid": "3b1366ce"
            }
          ]
        }
      ]
    },
    { "typ": "textblock",
      "cre": "2016-01-28T09:10:20",
      "mod": "2016-01-28T09:11:13",
      "h": 19.147,
      "ind": 3,
      "sheet": 0,
      "split": [ ],
      "uuid": "334be588",
      "y0": 261.309,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T09:10:20",
          "mod": "2016-01-28T09:11:13",
          "lines": [
            0
          ],
          "text": "S(x) = [I(x) − β(x)H(x)] / [1 − β(x)].",
          "uuid": "48587237",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T09:10:20",
              "mod": "2016-01-28T09:10:20",
              "end": 1,
              "start": 0,
              "style": 1,
              "uuid": "5d8bf61f"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:21",
              "mod": "2016-01-28T09:10:21",
              "end": 3,
              "start": 2,
              "style": 1,
              "uuid": "558b989b"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:26",
              "mod": "2016-01-28T09:10:26",
              "end": 9,
              "start": 8,
              "style": 1,
              "uuid": "e3385dca"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:26",
              "mod": "2016-01-28T09:10:26",
              "end": 11,
              "start": 10,
              "style": 1,
              "uuid": "0911d0a4"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:29",
              "mod": "2016-01-28T09:10:29",
              "end": 18,
              "start": 17,
              "style": 1,
              "uuid": "f4f2c07e"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:30",
              "mod": "2016-01-28T09:10:30",
              "end": 20,
              "start": 19,
              "style": 1,
              "uuid": "9d5bb047"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:30",
              "mod": "2016-01-28T09:10:30",
              "end": 22,
              "start": 21,
              "style": 1,
              "uuid": "146932e3"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:10:43",
              "mod": "2016-01-28T09:10:43",
              "end": 35,
              "start": 34,
              "style": 1,
              "uuid": "cb31b7a9"
            }
          ]
        }
      ]
    },
    { "typ": "textblock",
      "cre": "2016-01-28T08:59:24",
      "mod": "2016-01-28T09:00:50",
      "h": 73.498,
      "ind": 1,
      "sheet": 0,
      "split": [ ],
      "uuid": "e171081c",
      "y0": 280.456,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T08:59:24",
          "mod": "2016-01-28T09:00:50",
          "lines": [
            0,
            58,
            120
          ],
          "text": "The idea is to have β be slowly varying over the image; β being largely a function of object distance, and H be more or less constant across the image.",
          "uuid": "a962aa56",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T09:00:11",
              "mod": "2016-01-28T09:00:11",
              "end": 108,
              "start": 107,
              "style": 1,
              "uuid": "74e9bf55"
            }
          ]
        }
      ]
    },
    { "typ": "textblock",
      "cre": "2016-01-28T09:00:55",
      "mod": "2016-01-28T09:09:39",
      "h": 119.83,
      "ind": 1,
      "sheet": 0,
      "split": [ ],
      "uuid": "7abf5674",
      "y0": 353.954,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T09:00:55",
          "mod": "2016-01-28T09:09:39",
          "lines": [
            0,
            56,
            117,
            176,
            245
          ],
          "text": "One straightforward approach is to very gently blur the image, then find the darkest pixel in each of K x L regions, where K ~ L ~ 10‒15. Or, you could find the 2nd percentile pixel, or whatever. That pixel, call it D(x), is used as an estimate of β(x) H0. (We’ll take H to be constant for now.)",
          "uuid": "5f2ea1db",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T09:01:40",
              "mod": "2016-01-28T09:01:40",
              "end": 103,
              "start": 102,
              "style": 1,
              "uuid": "9733c3cc"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:01:41",
              "mod": "2016-01-28T09:01:41",
              "end": 107,
              "start": 106,
              "style": 1,
              "uuid": "c06a3c9d"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:03:10",
              "mod": "2016-01-28T09:03:10",
              "end": 217,
              "start": 216,
              "style": 1,
              "uuid": "c86dbe55"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:03:10",
              "mod": "2016-01-28T09:03:10",
              "end": 219,
              "start": 218,
              "style": 1,
              "uuid": "f1e2672b"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:03:15",
              "mod": "2016-01-28T09:03:15",
              "end": 251,
              "start": 250,
              "style": 1,
              "uuid": "ca4697cc"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:03:16",
              "mod": "2016-01-28T09:03:16",
              "end": 254,
              "start": 253,
              "style": 1,
              "uuid": "1c089538"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:03:34",
              "mod": "2016-01-28T09:03:34",
              "end": 255,
              "start": 254,
              "style": 7,
              "uuid": "94a4703f"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:03:42",
              "mod": "2016-01-28T09:03:42",
              "end": 270,
              "start": 269,
              "style": 1,
              "uuid": "e56fb412"
            }
          ]
        }
      ]
    },
    { "typ": "textblock",
      "cre": "2016-01-28T09:09:39",
      "mod": "2016-01-28T09:18:35",
      "h": 119.83,
      "ind": 1,
      "sheet": 0,
      "split": [ ],
      "uuid": "ec25f601",
      "y0": 473.784,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T09:09:39",
          "mod": "2016-01-28T09:18:35",
          "lines": [
            0,
            52,
            111,
            181,
            245
          ],
          "text": "Question: How to extract H0 from that. (There is an unknowable parameter: scaling H ← aH and β ← a−1β, where a is a global constant, is an invariant of the fit.) The effect is that I can write H = a H*, β = a−1 β* where H* is normalized in some convenient way. This yields:",
          "uuid": "1a8417cf",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T09:09:44",
              "mod": "2016-01-28T09:09:44",
              "end": 26,
              "start": 25,
              "style": 1,
              "uuid": "9ca8b946"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:09:45",
              "mod": "2016-01-28T09:09:45",
              "end": 27,
              "start": 26,
              "style": 7,
              "uuid": "4b44fbf9"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:12:29",
              "mod": "2016-01-28T09:12:29",
              "end": 83,
              "start": 82,
              "style": 1,
              "uuid": "94d32b34"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:12:32",
              "mod": "2016-01-28T09:12:32",
              "end": 87,
              "start": 86,
              "style": 1,
              "uuid": "8c4caa4f"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:12:33",
              "mod": "2016-01-28T09:12:33",
              "end": 88,
              "start": 87,
              "style": 1,
              "uuid": "28947f7a"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:12:41",
              "mod": "2016-01-28T09:12:41",
              "end": 98,
              "start": 97,
              "style": 1,
              "uuid": "0ee65e71"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:12:42",
              "mod": "2016-01-28T09:12:42",
              "end": 100,
              "start": 98,
              "style": 6,
              "uuid": "76325d34"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:13:06",
              "mod": "2016-01-28T09:13:06",
              "end": 110,
              "start": 109,
              "style": 1,
              "uuid": "ac02cc80"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:17:37",
              "mod": "2016-01-28T09:17:37",
              "end": 194,
              "start": 193,
              "style": 1,
              "uuid": "6b4d478d"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:17:39",
              "mod": "2016-01-28T09:17:39",
              "end": 198,
              "start": 197,
              "style": 1,
              "uuid": "6a0ba541"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:17:40",
              "mod": "2016-01-28T09:17:40",
              "end": 200,
              "start": 199,
              "style": 1,
              "uuid": "520b5b7b"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:17:44",
              "mod": "2016-01-28T09:17:44",
              "end": 208,
              "start": 207,
              "style": 1,
              "uuid": "7f675b18"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:17:46",
              "mod": "2016-01-28T09:17:46",
              "end": 210,
              "start": 208,
              "style": 6,
              "uuid": "a0ef09c9"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:05",
              "mod": "2016-01-28T09:18:05",
              "end": 221,
              "start": 220,
              "style": 1,
              "uuid": "07f14b58"
            }
          ]
        }
      ]
    },
    { "typ": "textblock",
      "cre": "2016-01-28T09:18:35",
      "mod": "2016-01-28T09:19:02",
      "h": 19.147,
      "ind": 3,
      "sheet": 0,
      "split": [ ],
      "uuid": "d39c86ef",
      "y0": 593.614,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T09:18:35",
          "mod": "2016-01-28T09:19:02",
          "lines": [
            0
          ],
          "text": "S(x) = [I(x) − β*(x)H*(x)] / [1 − a−1 β*(x)].",
          "uuid": "8fdcd350",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T09:18:39",
              "mod": "2016-01-28T09:18:39",
              "end": 1,
              "start": 0,
              "style": 1,
              "uuid": "61280d0b"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:39",
              "mod": "2016-01-28T09:18:39",
              "end": 3,
              "start": 2,
              "style": 1,
              "uuid": "11f04808"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:41",
              "mod": "2016-01-28T09:18:41",
              "end": 9,
              "start": 8,
              "style": 1,
              "uuid": "7b0783f0"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:42",
              "mod": "2016-01-28T09:18:42",
              "end": 11,
              "start": 10,
              "style": 1,
              "uuid": "68f7cdcc"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:46",
              "mod": "2016-01-28T09:18:46",
              "end": 19,
              "start": 18,
              "style": 1,
              "uuid": "718a01ce"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:47",
              "mod": "2016-01-28T09:18:47",
              "end": 21,
              "start": 20,
              "style": 1,
              "uuid": "47c761cc"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:49",
              "mod": "2016-01-28T09:18:49",
              "end": 24,
              "start": 23,
              "style": 1,
              "uuid": "051078cb"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:57",
              "mod": "2016-01-28T09:18:57",
              "end": 35,
              "start": 34,
              "style": 1,
              "uuid": "fe7a897b"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:18:58",
              "mod": "2016-01-28T09:18:58",
              "end": 37,
              "start": 35,
              "style": 6,
              "uuid": "4b5419d6"
            },
            { "typ": "markup",
              "cre": "2016-01-28T09:19:01",
              "mod": "2016-01-28T09:19:01",
              "end": 42,
              "start": 41,
              "style": 1,
              "uuid": "b3ac9e1d"
            }
          ]
        }
      ]
    },
    { "typ": "textblock",
      "cre": "2016-01-28T09:19:21",
      "mod": "2016-01-28T09:19:45",
      "h": 50.332,
      "ind": 1,
      "sheet": 0,
      "split": [ ],
      "uuid": "07c7f6a6",
      "y0": 612.761,
      "cc": [
        { "typ": "text",
          "cre": "2016-01-28T09:19:21",
          "mod": "2016-01-28T09:19:45",
          "lines": [
            0,
            57
          ],
          "text": "This immediately shows that a is a free parameter of the algorithm.",
          "uuid": "e97ea103",
          "cc": [
            { "typ": "markup",
              "cre": "2016-01-28T09:19:30",
              "mod": "2016-01-28T09:19:30",
              "end": 29,
              "start": 28,
              "style": 1,
              "uuid": "26b8699a"
            }
          ]
        }
      ]
    }
  ]
}
